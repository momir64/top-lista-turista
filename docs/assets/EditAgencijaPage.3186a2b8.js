import{n as U}from"./AdminBar.a2f714ea.js";import{_ as q,f as A,h as F,V as g,j as f,i as E,k as O,b as P,ag as L}from"./VMain.95753a85.js";import{r as h,q as v,o as j,c as w,w as t,a,s as M,f as p,t as b,d as Y,e as G,F as H,aD as R,v as y,x as _,b as c,p as Z,g as J}from"./index.00a3e580.js";import{S as K,V as Q}from"./index.78641151.js";import{V as z,a as n,c as W,b as m}from"./VTextField.0b6e96d5.js";import{V as X}from"./VFileInput.b7bdb56f.js";import{V as I,b as $,a as ee}from"./VList.bc940a3e.js";import{V as ae}from"./VDialog.0d065938.js";import{V as C}from"./VHover.7806badf.js";import"./VChip.7310bcf8.js";const te={components:{navigation:U,foote:A},data:()=>({url:"https://top-lista-turista-default-rtdb.europe-west1.firebasedatabase.app/",fab:null,dialog:!1,destinacijaBrisanje:null,agencija:{},destinacije:[],naziv:null,ulica:null,grad:null,postBroj:null,email:null,telefon:null,osnovana:null,slika:null,required:[e=>!!e||"Obavezno polje"],numeric:[e=>/^\d+$/.test(e)||"Mora biti broj"],numericPhone:[e=>/^[\+]?[(]?[0-9]{3}[)]?[-\s\.\\/]?[0-9]{2,6}[-\s\.]?[0-9]{2,6}[-\s\.]?[0-9]{1,6}$/.test(e)||"Neispravan telefon"],numericYear:[e=>+e>=1923&&+e<=new Date().getFullYear()||"Neispravna godina"],emailCheck:[e=>/[^@ \t\r\n]+@[^@ \t\r\n]+\.[^@ \t\r\n]+/.test(e)||"Neispravan email"],nameCheck:[e=>/^[a-z0-9_-]{2,20}$/.test(e)||"Neispravano korisni\u010Dko ime"],passCheck:[e=>/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,}$/.test(e)||"Nedovoljno jaka lozinka"]}),computed:{fileCheck(){return[e=>!!e&&!!e.length||"Obavezno polje",e=>!!e[0].size||e[0].name==this.agencija.slika||"Neispravan fajl"]}},methods:{toTop(){window.scrollTo({top:0,behavior:"smooth"})},check(){this.fab=window.pageYOffset>60},async load_agencije(){let e,l;try{let d=await fetch(this.url+"/agencije.json");if(e=d.status,l=d.statusText,!d.ok)throw new Error;const s=await d.json(),r=[];for(const i in s)if(i==this.$route.params.id){this.agencija={id:i,naziv:s[i].naziv,email:s[i].email,adresa:s[i].adresa,osnovana:s[i].godina,telefon:s[i].brojTelefona,destinacije:s[i].destinacije,slika:s[i].logo.split("/").pop()},this.naziv=this.agencija.naziv,this.ulica=this.agencija.adresa.split(",")[0].trim(),this.grad=this.agencija.adresa.split(",")[1].trim(),this.postBroj=this.agencija.adresa.split(",")[2].trim(),this.email=this.agencija.email,this.telefon=this.agencija.telefon,this.osnovana=this.agencija.osnovana,this.slika=[{name:this.agencija.slika}];break}this.agencija.ulica=this.agencija.adresa.split(",")[0],this.load_destinacije(this.agencija.destinacije)}catch(d){console.log(d),l=`Firebase: ${e}\xA0${l}`;const s="Ooops";this.$router.push({path:"/error",state:e==200?{}:{title:s,message:l}})}},async load_destinacije(e){let l,d;try{let s=await fetch(this.url+"/destinacije.json");if(l=s.status,d=s.statusText,!s.ok)throw new Error;const r=await s.json(),i=[];console.log(r),console.log(e);for(const u in r[e])i.push({id:u,tip:r[e][u].tip,opis:r[e][u].opis,cena:r[e][u].cena,naziv:r[e][u].naziv,slike:r[e][u].slike,prevoz:r[e][u].prevoz,maxOsoba:r[e][u].maxOsoba});this.destinacije=i}catch(s){console.log(s),d=`Firebase: ${l}\xA0${d}`;const r="Ooops";this.$router.push({path:"/error",state:l==200?{}:{title:r,message:d}})}}},beforeMount(){this.$route.params.id&&this.load_agencije()}},B=e=>(Z("data-v-1aeb8972"),e=e(),J(),e),le=B(()=>c("div",{class:"text-h4 font-weight-bold mb-2"},"Podaci",-1)),oe=B(()=>c("div",{class:"text-h4 font-weight-bold mb-n0 mt-7"}," Destinacije: ",-1)),se={class:"float-left"},ie={class:"d-inline-block text-disabled text-right me-5 me-sm-12",style:{width:"29px","font-family":"monospace !important"}},ne={class:""};function re(e,l,d,s,r,i){const u=h("navigation"),V=h("router-link"),S=h("foote");return v((j(),w(F,null,{default:t(()=>[a(u,{color:"secondary",flat:!1}),a(E,null,{default:t(()=>[a(Q,{id:"content_holder_container"},{default:t(()=>[a(g,{id:"content_holder",class:"align-center text-center px-xs-3 px-sm-5 px-md-11"},{default:t(()=>[a(z,{"no-gutters":""},{default:t(()=>[a(n,{cols:"12",md:"6",class:"text-center order-md-last order-first pa-3 ps-3 ps-md-2 ps-lg-4"},{default:t(()=>[a(g,{class:"kartica",width:"100%",variant:"outlined"},{default:t(()=>[a(W,{onSubmit:M(e.nekafunkcija,["prevent"]),"validate-on":"blur"},{default:t(()=>[a(z,{class:"pa-13 pt-7 px-7 px-sm-9 px-md-11 px-lg-13"},{default:t(()=>[a(n,null,{default:t(()=>[le]),_:1}),a(n,{cols:"12"},{default:t(()=>[a(m,{rules:e.required,class:"mb-n4 text-left",variant:"outlined","bg-color":"#fff",label:"Naziv agencije",modelValue:e.naziv,"onUpdate:modelValue":l[0]||(l[0]=o=>e.naziv=o)},null,8,["rules","modelValue"])]),_:1}),a(n,{cols:"12"},{default:t(()=>[a(m,{rules:e.required,class:"mb-n4 text-left",variant:"outlined","bg-color":"#fff",label:"Ulica i broj",modelValue:e.ulica,"onUpdate:modelValue":l[1]||(l[1]=o=>e.ulica=o)},null,8,["rules","modelValue"])]),_:1}),a(n,{md:"7",cols:"12"},{default:t(()=>[a(m,{rules:e.required,class:"mb-n4 text-left",variant:"outlined","bg-color":"#fff",label:"Grad",modelValue:e.grad,"onUpdate:modelValue":l[2]||(l[2]=o=>e.grad=o)},null,8,["rules","modelValue"])]),_:1}),a(n,{md:"5",cols:"12"},{default:t(()=>[a(m,{rules:[e.required,e.numeric].flat(),class:"mb-n4 text-left",variant:"outlined","bg-color":"#fff",label:"Po\u0161tanski broj",modelValue:e.postBroj,"onUpdate:modelValue":l[3]||(l[3]=o=>e.postBroj=o)},null,8,["rules","modelValue"])]),_:1}),a(n,{cols:"12"},{default:t(()=>[a(m,{rules:[e.required,e.emailCheck].flat(),class:"mb-n4 text-left",variant:"outlined","bg-color":"#fff",label:"Email",modelValue:e.email,"onUpdate:modelValue":l[4]||(l[4]=o=>e.email=o)},null,8,["rules","modelValue"])]),_:1}),a(n,{cols:"12"},{default:t(()=>[a(m,{rules:[e.required,e.numericPhone].flat(),class:"mb-n4 text-left",variant:"outlined","bg-color":"#fff",label:"Telefon",modelValue:e.telefon,"onUpdate:modelValue":l[5]||(l[5]=o=>e.telefon=o)},null,8,["rules","modelValue"])]),_:1}),a(n,{md:"5",cols:"12"},{default:t(()=>[a(m,{rules:[e.required,e.numeric,e.numericYear].flat(),class:"mb-n4 text-left",variant:"outlined","bg-color":"#fff",label:"Godina osnivanja",modelValue:e.osnovana,"onUpdate:modelValue":l[6]||(l[6]=o=>e.osnovana=o)},null,8,["rules","modelValue"])]),_:1}),a(n,{md:"7",cols:"12"},{default:t(()=>[a(X,{rules:i.fileCheck,class:"mb-n4 text-left",variant:"outlined","bg-color":"#fff",label:"Slika",modelValue:e.slika,"onUpdate:modelValue":l[7]||(l[7]=o=>e.slika=o),accept:"image/*","prepend-icon":"","prepend-inner-icon":"mdi-paperclip"},null,8,["rules","modelValue"])]),_:1}),a(n,{md:"5",cols:"12","offset-md":"7"},{default:t(()=>[a(f,{type:"submit",class:"bg-white mt-4",style:{"font-weight":"600"},variant:"outlined",width:"100%",height:"44px"},{default:t(()=>[p(b(this.$route.params.id?"A\u017Euriraj":"Dodaj"),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1}),a(n,{cols:"12",md:"6",class:"pe-0 pe-md-2 pe-lg-4"},{default:t(()=>[a(n,{cols:"12",class:"text-center"},{default:t(()=>[a(g,{class:"kartica",variant:"outlined"},{default:t(()=>[oe,a(I,{class:"px-3 px-sm-6 py-13","bg-color":"#fffdf9",lines:"one"},{default:t(()=>[(j(!0),Y(H,null,G(e.destinacije,(o,k)=>(j(),w(C,{key:o.id},{default:t(({isHovering:N,props:T})=>[v(a($,{thickness:"2"},null,512),[[y,k==0]]),a(ee,_(T,{style:{"background-color":N?"#f7f5f1":""}}),{title:t(()=>[c("div",se,[c("span",ie,b(k+1),1),c("span",ne,b(o.naziv),1)])]),append:t(()=>[a(V,{style:{"text-decoration":"none",color:"inherit"},to:`/admin_panel/destinacija/${e.agencija.id}/${o.id}`},{default:t(()=>[a(f,{variant:"plain",icon:"mdi-pencil"})]),_:2},1032,["to"]),a(C,null,{default:t(({isHovering:x,props:D})=>[a(f,_({icon:"mdi-delete",variant:"plain"},D,{onClick:de=>{e.dialog=!0,e.destinacijaBrisanje=o.naziv},color:x?"red-darken-1":""}),null,16,["onClick","color"])]),_:2},1024)]),_:2},1040,["style"]),a($,{thickness:"2"})]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),a(n,{cols:"12",class:"text-center"},{default:t(()=>[a(V,{style:R([this.$route.params.id?{}:{pointerEvents:"none",opacity:.5},{"text-decoration":"none",color:"inherit"}]),to:"/admin_panel/destinacija/"+e.agencija.id},{default:t(()=>[a(f,{class:"mb-9 px-11 kartica mt-1",height:"50px",variant:"outlined",prependIcon:"mdi-plus"},{default:t(()=>[p(" dodaj novu destinaciju ")]),_:1})]),_:1},8,["style","to"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(O,null,{default:t(()=>[v(a(f,{fab:"",dark:"",fixed:"",bottom:"",right:"",class:"topFab",color:"#bfb7a7",icon:"mdi-arrow-up",onClick:i.toTop},null,8,["onClick"]),[[y,e.fab]])]),_:1}),a(S,{mediaLinks:!1}),a(ae,{modelValue:e.dialog,"onUpdate:modelValue":l[10]||(l[10]=o=>e.dialog=o),width:"auto"},{default:t(()=>[a(g,{class:"kartica_dijalog pa-4"},{default:t(()=>[a(P,{class:"text-wrap text-center mb-4 mt-1"},{default:t(()=>[p(" Da li ste sigurni da \u017Eelite da obri\u0161ete destinaciju "+b(e.destinacijaBrisanje)+"? ",1)]),_:1}),a(L,{class:"justify-center"},{default:t(()=>[a(f,{class:"me-2",style:{"border-radius":"13px"},variant:"text",onClick:l[8]||(l[8]=o=>{e.dialog=!1,e.brisanjeAgencije()})},{default:t(()=>[p(" Da ")]),_:1}),a(f,{style:{"border-radius":"13px"},variant:"text",onClick:l[9]||(l[9]=o=>e.dialog=!1)},{default:t(()=>[p(" Ne ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})),[[K,i.check]])}const Ve=q(te,[["render",re],["__scopeId","data-v-1aeb8972"]]);export{Ve as default};

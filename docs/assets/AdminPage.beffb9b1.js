import{n as C}from"./AdminBar.9d747660.js";import{_ as T,f as A,h as E,V as f,j as l,i as S,k as F,b as L,ag as z}from"./VMain.c69f6bff.js";import{r as m,q as h,o as g,c as b,w as s,a,d as N,e as O,F as P,f as d,v,t as j,x as k,b as c,p as M,g as q}from"./index.d94e732b.js";import{S as H,V as U}from"./index.048d152a.js";import{V as Y,b as w,a as G}from"./VList.1329814c.js";import{V as J}from"./VDialog.e5b5785a.js";import{V}from"./VHover.dd05b3a3.js";const K={components:{navigation:C,foote:A},data:()=>({url:"https://top-lista-turista-default-rtdb.europe-west1.firebasedatabase.app/",agencije:[],agencijaBrisanje:null,agencijaBrisanjeID:null,destinacijeBrisanjeID:null,agencijaBrisanjeIndex:null,fab:null,dialog:!1}),methods:{toTop(){window.scrollTo({top:0,behavior:"smooth"})},check(){this.fab=window.pageYOffset>60},async load_agencije(){let e,t;try{let o=await fetch(this.url+"/agencije.json");if(e=o.status,t=o.statusText,!o.ok)throw new Error;const i=await o.json(),u=[];for(const n in i)u.push({id:n,logo:i[n].logo,naziv:i[n].naziv,adresa:i[n].adresa,email:i[n].email,telefon:i[n].brojTelefona,destinacije:i[n].destinacije});this.agencije=u}catch(o){console.log(o),t=`Firebase: ${e}\xA0${t}`,e="Ooops",this.$router.push({path:"/error",state:{code:e,message:t}})}},async brisanjeAgencije(){let e,t;try{let o=await fetch(this.url+`/agencije/${this.agencijaBrisanjeID}.json`,{method:"DELETE"});if(e=o.status,t=o.statusText,!o.ok)throw new Error;this.agencije.splice(this.agencijaBrisanjeIndex,1),await this.brisanjeDestinacija()}catch(o){console.log(o),t=`Firebase: ${e}\xA0${t}`;const i="Ooops";this.$router.push({path:"/error",state:e==200?{}:{title:i,message:t}})}},async brisanjeDestinacija(){let e,t;try{let o=await fetch(this.url+`/destinacije/${this.destinacijeBrisanjeID}.json`,{method:"DELETE"});if(e=o.status,t=o.statusText,!o.ok)throw new Error}catch(o){console.log(o),t=`Firebase: ${e}\xA0${t}`;const i="Ooops";this.$router.push({path:"/error",state:e==200?{}:{title:i,message:t}})}}},beforeMount(){this.load_agencije()}},Q=e=>(M("data-v-186d06c8"),e=e(),q(),e),R=Q(()=>c("div",{class:"text-h4 font-weight-bold mb-n0 mt-7"},"Agencije:",-1)),W={class:"float-left"},X={class:"d-inline-block text-disabled text-right me-5 me-sm-12",style:{width:"29px","font-family":"monospace !important"}},Z={class:""};function ee(e,t,o,i,u,n){const x=m("navigation"),_=m("router-link"),y=m("foote");return h((g(),b(E,null,{default:s(()=>[a(x,{color:"secondary",flat:!1}),a(S,null,{default:s(()=>[a(U,{id:"content_holder_container"},{default:s(()=>[a(f,{id:"content_holder",class:"align-center text-center px-4 px-sm-14 px-md-16"},{default:s(()=>[a(f,{class:"kartica mb-9",variant:"outlined"},{default:s(()=>[R,a(Y,{class:"px-3 px-sm-6 py-13","bg-color":"#fffdf9",lines:"one"},{default:s(()=>[(g(!0),N(P,null,O(e.agencije,(r,p)=>(g(),b(V,{key:r.id},{default:s(({isHovering:B,props:D})=>[h(a(w,{thickness:"2"},null,512),[[v,p==0]]),a(G,k(D,{style:{"background-color":B?"#f7f5f1":""}}),{title:s(()=>[c("div",W,[c("span",X,j(p+1),1),c("span",Z,j(r.naziv),1)])]),append:s(()=>[a(_,{style:{"text-decoration":"none",color:"inherit"},to:"/admin_panel/agencija/"+r.id},{default:s(()=>[a(l,{variant:"plain",icon:"mdi-pencil"})]),_:2},1032,["to"]),a(V,null,{default:s(({isHovering:I,props:$})=>[a(l,k({icon:"mdi-delete",variant:"plain"},$,{onClick:ae=>{e.dialog=!0,e.agencijaBrisanje=r.naziv,e.agencijaBrisanjeID=r.id,e.destinacijeBrisanjeID=r.destinacije,e.agencijaBrisanjeIndex=p},color:I?"red-darken-1":""}),null,16,["onClick","color"])]),_:2},1024)]),_:2},1040,["style"]),a(w,{thickness:"2"})]),_:2},1024))),128))]),_:1})]),_:1}),a(_,{style:{"text-decoration":"none",color:"inherit"},to:"/admin_panel/agencija"},{default:s(()=>[a(l,{class:"px-10 kartica mt-1",height:"50px",variant:"outlined",prependIcon:"mdi-plus"},{default:s(()=>[d(" dodaj novu agenciju ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(F,null,{default:s(()=>[h(a(l,{fab:"",dark:"",fixed:"",bottom:"",right:"",class:"topFab",color:"#bfb7a7",icon:"mdi-arrow-up",onClick:n.toTop},null,8,["onClick"]),[[v,e.fab]])]),_:1}),a(y,{mediaLinks:!1}),a(J,{modelValue:e.dialog,"onUpdate:modelValue":t[2]||(t[2]=r=>e.dialog=r),width:"auto"},{default:s(()=>[a(f,{class:"kartica_dijalog pa-4"},{default:s(()=>[a(L,{class:"text-wrap text-center mb-4 mt-1"},{default:s(()=>[d(" Da li ste sigurni da \u017Eelite da obri\u0161ete agenciju "+j(e.agencijaBrisanje)+"? ",1)]),_:1}),a(z,{class:"justify-center"},{default:s(()=>[a(l,{class:"me-2",style:{"border-radius":"13px"},variant:"text",onClick:t[0]||(t[0]=r=>{e.dialog=!1,n.brisanjeAgencije()})},{default:s(()=>[d(" Da ")]),_:1}),a(l,{style:{"border-radius":"13px"},variant:"text",onClick:t[1]||(t[1]=r=>e.dialog=!1)},{default:s(()=>[d(" Ne ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})),[[H,n.check]])}const de=T(K,[["render",ee],["__scopeId","data-v-186d06c8"]]);export{de as default};

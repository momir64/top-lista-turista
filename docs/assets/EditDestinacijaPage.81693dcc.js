import{n as se}from"./AdminBar.a2f714ea.js";import{K as re,e as ue,x as de,_ as ce,f as fe,h as me,V as E,j as G,i as pe,k as ve}from"./VMain.95753a85.js";import{h as he,_ as ge,m as N,i as w,K as be,k as j,l as Ve,ax as xe,a as t,x as T,F as O,q as C,af as ke,aF as we,ad as R,az as je,O as ze,n as ye,r as H,o as Ce,c as Fe,w as n,s as Se,b as A,t as M,f as Pe,v as _e,p as Ie,g as Ne}from"./index.00a3e580.js";import{S as Te,V as Oe}from"./index.78641151.js";import{e as Re,f as Me,g as $e,h as Y,i as Ae,j as Be,k as Ue,c as De,V as qe,a as h,b as $}from"./VTextField.0b6e96d5.js";import{V as K}from"./VSelect.4823dd8a.js";import{V as Ee}from"./VFileInput.b7bdb56f.js";import"./VList.bc940a3e.js";import"./VChip.7310bcf8.js";const Ge=he()({name:"VTextarea",directives:{Intersect:re},inheritAttrs:!1,props:{autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Re(),...Me()},emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,a){let{attrs:v,emit:p,slots:l}=a;const u=ge(e,"modelValue"),{isFocused:r,focus:d,blur:i}=$e(e),L=N(()=>typeof e.counterValue=="function"?e.counterValue(u.value):(u.value||"").toString().length),Z=N(()=>{if(v.maxlength)return v.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function J(o,f){var c,m;!e.autofocus||!o||(m=(c=f[0].target)==null?void 0:c.focus)==null||m.call(c)}const B=w(),z=w(),U=w(""),y=w(),Q=N(()=>r.value||e.persistentPlaceholder);function F(){var o;y.value!==document.activeElement&&((o=y.value)==null||o.focus()),r.value||d()}function W(o){F(),p("click:control",o)}function X(o){p("mousedown:control",o)}function ee(o){o.stopPropagation(),F(),R(()=>{u.value="",je(e["onClick:clear"],o)})}function te(o){var c;const f=o.target;if(u.value=f.value,(c=e.modelModifiers)!=null&&c.trim){const m=[f.selectionStart,f.selectionEnd];R(()=>{f.selectionStart=m[0],f.selectionEnd=m[1]})}}const b=w();function V(){!e.autoGrow||R(()=>{if(!b.value||!z.value)return;const o=getComputedStyle(b.value),f=getComputedStyle(z.value.$el),c=parseFloat(o.getPropertyValue("--v-field-padding-top"))+parseFloat(o.getPropertyValue("--v-input-padding-top"))+parseFloat(o.getPropertyValue("--v-field-padding-bottom")),m=b.value.scrollHeight,P=parseFloat(o.lineHeight),_=Math.max(parseFloat(e.rows)*P+c,parseFloat(f.getPropertyValue("--v-input-control-height"))),I=parseFloat(e.maxRows)*P+c||1/0;U.value=ze(ye(m!=null?m:0,_,I))})}be(V),j(u,V),j(()=>e.rows,V),j(()=>e.maxRows,V),j(()=>e.density,V);let g;return j(b,o=>{o?(g=new ResizeObserver(V),g.observe(b.value)):g==null||g.disconnect()}),Ve(()=>{g==null||g.disconnect()}),ue(()=>{const o=!!(l.counter||e.counter||e.counterValue),f=!!(o||l.details),[c,m]=xe(v),[{modelValue:P,..._}]=Y.filterProps(e),[I]=Ae(e);return t(Y,T({ref:B,modelValue:u.value,"onUpdate:modelValue":x=>u.value=x,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--flush-details":["plain","underlined"].includes(e.variant)}]},c,_,{focused:r.value}),{...l,default:x=>{let{isDisabled:k,isDirty:D,isReadonly:ae,isValid:oe}=x;return t(Be,T({ref:z,style:{"--v-textarea-control-height":U.value},onClick:W,onMousedown:X,"onClick:clear":ee,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},I,{active:Q.value||D.value,dirty:D.value||e.dirty,disabled:k.value,focused:r.value,error:oe.value===!1}),{...l,default:le=>{let{props:{class:q,...ne}}=le;return t(O,null,[e.prefix&&t("span",{class:"v-text-field__prefix"},[e.prefix]),C(t("textarea",T({ref:y,class:q,value:u.value,onInput:te,autofocus:e.autofocus,readonly:ae.value,disabled:k.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:F,onBlur:i},ne,m),null),[[ke("intersect"),{handler:J},null,{once:!0}]]),e.autoGrow&&C(t("textarea",{class:[q,"v-textarea__sizer"],"onUpdate:modelValue":ie=>u.value=ie,ref:b,readonly:!0,"aria-hidden":"true"},null),[[we,u.value]]),e.suffix&&t("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:f?x=>{var k;return t(O,null,[(k=l.details)==null?void 0:k.call(l,x),o&&t(O,null,[t("span",null,null),t(Ue,{active:e.persistentCounter||r.value,value:L.value,max:Z.value},l.counter)])])}:void 0})}),de({},B,z,y)}}),He={components:{navigation:se,foote:fe},data:()=>({url:"https://top-lista-turista-default-rtdb.europe-west1.firebasedatabase.app/",fab:null,destinacija:{},naziv:null,opis:null,tip:null,prevoz:null,cena:null,maxOsoba:null,slike:null,opcijeTip:["Letovanje","Zimovanje","Gradovi Evrope"],opcijePrevoz:["Avion","Autobus","Sopstveni"],required:[e=>!!e||"Obavezno polje"],numeric:[e=>/^\d+$/.test(e)||"Mora biti broj"],numericPhone:[e=>/^[\+]?[(]?[0-9]{3}[)]?[-\s\.\\/]?[0-9]{2,6}[-\s\.]?[0-9]{2,6}[-\s\.]?[0-9]{1,6}$/.test(e)||"Neispravan telefon"],numericYear:[e=>+e>=1923&&+e<=new Date().getFullYear()||"Neispravna godina"],emailCheck:[e=>/[^@ \t\r\n]+@[^@ \t\r\n]+\.[^@ \t\r\n]+/.test(e)||"Neispravan email"],nameCheck:[e=>/^[a-z0-9_-]{2,20}$/.test(e)||"Neispravano korisni\u010Dko ime"],passCheck:[e=>/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,}$/.test(e)||"Nedovoljno jaka lozinka"]}),computed:{fileCheck(){return[e=>(console.log(!!e&&!!e.length),console.log(e),!0),e=>!!e&&!!e.length||"Obavezno polje",e=>e.every(a=>!!a.size)||e.length==this.destinacija.slike.length&&e.every(s,a=>S.name==this.destinacija.slike[a].split("/").pop())||"Neispravan fajl"]}},methods:{toTop(){window.scrollTo({top:0,behavior:"smooth"})},check(){this.fab=window.pageYOffset>60},async load_destinacije(e){let a,v;try{let p=await fetch(this.url+"/destinacije.json");if(a=p.status,v=p.statusText,!p.ok)throw new Error;const l=await p.json(),u=[];console.log(l),console.log(e);for(const r in l)for(const d in l[r])d==e&&(this.destinacija={id:d,tip:l[r][d].tip,opis:l[r][d].opis,cena:l[r][d].cena,naziv:l[r][d].naziv,slike:l[r][d].slike,prevoz:l[r][d].prevoz,maxOsoba:l[r][d].maxOsoba});this.naziv=this.destinacija.naziv,this.opis=this.destinacija.opis,this.tip=this.destinacija.tip,this.prevoz=this.destinacija.prevoz,this.prevoz=this.prevoz.charAt(0).toUpperCase()+this.prevoz.slice(1),this.cena=this.destinacija.cena,this.maxOsoba=this.destinacija.maxOsoba,this.slike=this.destinacija.slike.map(r=>({name:r.split("/").pop()}))}catch(p){console.log(p),v=`Firebase: ${a}\xA0${v}`;const l="Ooops";this.$router.push({path:"/error",state:a==200?{}:{title:l,message:v}})}}},beforeMount(){this.$route.params.id&&this.load_destinacije(this.$route.params.id)}},Ye=e=>(Ie("data-v-f85996fd"),e=e(),Ne(),e),Ke=Ye(()=>A("div",{class:"text-h4 font-weight-bold mb-2"},"Podaci",-1)),Le={id:"izbor"},Ze={id:"izbor"};function Je(e,a,v,p,l,u){const r=H("navigation"),d=H("foote");return C((Ce(),Fe(me,null,{default:n(()=>[t(r,{color:"secondary",flat:!1}),t(pe,null,{default:n(()=>[t(Oe,{id:"content_holder_container"},{default:n(()=>[t(E,{id:"content_holder",class:"align-center text-center px-8 px-sm-12 px-md-16"},{default:n(()=>[t(E,{class:"kartica",width:"100%",variant:"outlined"},{default:n(()=>[t(De,{onSubmit:Se(e.nekafunkcija,["prevent"]),"validate-on":"blur"},{default:n(()=>[t(qe,{class:"pa-13 pt-7 px-5 px-sm-9 px-md-11 px-lg-13 justify-center"},{default:n(()=>[t(h,null,{default:n(()=>[Ke]),_:1}),t(h,{cols:"12"},{default:n(()=>[t($,{rules:e.required,class:"mb-n4 text-left",variant:"outlined","bg-color":"#fff",label:"Naziv destinacije",modelValue:e.naziv,"onUpdate:modelValue":a[0]||(a[0]=i=>e.naziv=i)},null,8,["rules","modelValue"])]),_:1}),t(h,{md:"6",cols:"12"},{selection:n(({item:i})=>[A("span",Le,M(i.title),1)]),default:n(()=>[t(K,{rules:e.required,class:"mb-n4 text-left",variant:"outlined","bg-color":"#fff",label:"Tip",items:e.opcijeTip,modelValue:e.tip,"onUpdate:modelValue":a[1]||(a[1]=i=>e.tip=i)},null,8,["rules","items","modelValue"])]),_:1}),t(h,{md:"6",cols:"12"},{selection:n(({item:i})=>[A("span",Ze,M(i.title),1)]),default:n(()=>[t(K,{rules:e.required,class:"mb-n4 text-left",variant:"outlined","bg-color":"#fff",label:"Prevoz",items:e.opcijePrevoz,modelValue:e.prevoz,"onUpdate:modelValue":a[2]||(a[2]=i=>e.prevoz=i)},null,8,["rules","items","modelValue"])]),_:1}),t(h,{md:"6",cols:"12"},{default:n(()=>[t($,{rules:[e.required,e.numeric].flat(),class:"mb-n4 text-left",variant:"outlined","bg-color":"#fff",label:"Cena",modelValue:e.cena,"onUpdate:modelValue":a[3]||(a[3]=i=>e.cena=i),suffix:"RSD"},null,8,["rules","modelValue"])]),_:1}),t(h,{md:"6",cols:"12"},{default:n(()=>[t($,{rules:[e.required,e.numeric].flat(),class:"mb-n4 text-left",variant:"outlined","bg-color":"#fff",label:"Maksimalno osoba",modelValue:e.maxOsoba,"onUpdate:modelValue":a[4]||(a[4]=i=>e.maxOsoba=i)},null,8,["rules","modelValue"])]),_:1}),t(h,{cols:"12"},{default:n(()=>[t(Ee,{rules:u.fileCheck,class:"mb-n4 text-left",variant:"outlined","bg-color":"#fff",label:"Slike",modelValue:e.slike,"onUpdate:modelValue":a[5]||(a[5]=i=>e.slike=i),accept:"image/*",multiple:"",chips:"","prepend-icon":"","prepend-inner-icon":"mdi-paperclip"},null,8,["rules","modelValue"])]),_:1}),t(h,{cols:"12"},{default:n(()=>[t(Ge,{rules:e.required,class:"mb-n4 text-left",variant:"outlined","bg-color":"#fff",label:"Opis",modelValue:e.opis,"onUpdate:modelValue":a[6]||(a[6]=i=>e.opis=i),"auto-grow":""},null,8,["rules","modelValue"])]),_:1}),t(h,{md:"3",cols:"12"},{default:n(()=>[t(G,{type:"submit",class:"bg-white mt-4",style:{"font-weight":"600"},variant:"outlined",width:"100%",height:"44px"},{default:n(()=>[Pe(M(this.$route.params.id?"A\u017Euriraj":"Dodaj"),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1}),t(ve,null,{default:n(()=>[C(t(G,{fab:"",dark:"",fixed:"",bottom:"",right:"",class:"topFab",color:"#bfb7a7",icon:"mdi-arrow-up",onClick:u.toTop},null,8,["onClick"]),[[_e,e.fab]])]),_:1}),t(d,{mediaLinks:!1})]),_:1})),[[Te,u.check]])}const it=ce(He,[["render",Je],["__scopeId","data-v-f85996fd"]]);export{it as default};

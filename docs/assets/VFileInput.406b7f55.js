import{e as Q,f as W,g as X,h as $,i as Y,j as Z,k as ee}from"./VTextField.d47620c9.js";import{e as te,x as le}from"./VMain.bb3aa9c0.js";import{h as ne,a0 as ae,at as oe,_ as ue,m as f,i as C,k as ie,ax as se,a as o,x as g,F as k,aE as x,ad as re,az as ce}from"./index.395a7d4a.js";import{V as de}from"./VChip.562dba7a.js";const he=ne()({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...Q({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>ae(e).every(v=>v!=null&&typeof v=="object")},...W({clearable:!0})},emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,v){let{attrs:M,emit:V,slots:n}=v;const{t:I}=oe(),a=ue(e,"modelValue"),{isFocused:m,focus:N,blur:j}=X(e),S=f(()=>typeof e.showSize!="boolean"?e.showSize:void 0),F=f(()=>{var t;return((t=a.value)!=null?t:[]).reduce((l,u)=>{let{size:r=0}=u;return l+r},0)}),b=f(()=>x(F.value,S.value)),y=f(()=>{var t;return((t=a.value)!=null?t:[]).map(l=>{const{name:u="",size:r=0}=l;return e.showSize?`${u} (${x(r,S.value)})`:u})}),D=f(()=>{var l,u;const t=(u=(l=a.value)==null?void 0:l.length)!=null?u:0;return e.showSize?I(e.counterSizeString,t,b.value):I(e.counterString,t)}),z=C(),P=C(),i=C();function h(){var t;i.value!==document.activeElement&&((t=i.value)==null||t.focus()),m.value||N()}function E(t){w(t)}function _(t){V("mousedown:control",t)}function w(t){var l;(l=i.value)==null||l.click(),V("click:control",t)}function L(t){t.stopPropagation(),h(),re(()=>{a.value=[],ce(e["onClick:clear"],t)})}return ie(a,t=>{(!Array.isArray(t)||!t.length)&&i.value&&(i.value.value="")}),te(()=>{const t=!!(n.counter||e.counter),l=!!(t||n.details),[u,r]=se(M),[{modelValue:fe,...T}]=$.filterProps(e),[U]=Y(e);return o($,g({ref:z,modelValue:a.value,"onUpdate:modelValue":c=>a.value=c,class:"v-file-input","onClick:prepend":E},u,T,{focused:m.value}),{...n,default:c=>{let{id:p,isDisabled:d,isDirty:R,isReadonly:q,isValid:G}=c;return o(Z,g({ref:P,"prepend-icon":e.prependIcon,onMousedown:_,onClick:w,"onClick:clear":L,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},U,{id:p.value,active:R.value||m.value,dirty:R.value,disabled:d.value,focused:m.value,error:G.value===!1}),{...n,default:H=>{var B;let{props:{class:J,...K}}=H;return o(k,null,[o("input",g({ref:i,type:"file",readonly:q.value,disabled:d.value,multiple:e.multiple,name:e.name,onClick:s=>{s.stopPropagation(),h()},onChange:s=>{var A;if(!s.target)return;const O=s.target;a.value=[...(A=O.files)!=null?A:[]]},onFocus:h,onBlur:j},K,r),null),o("div",{class:J},[!!((B=a.value)!=null&&B.length)&&(n.selection?n.selection({fileNames:y.value,totalBytes:F.value,totalBytesReadable:b.value}):e.chips?y.value.map(s=>o(de,{key:s,size:"small",color:e.color},{default:()=>[s]})):y.value.join(", "))])])}})},details:l?c=>{var p,d;return o(k,null,[(p=n.details)==null?void 0:p.call(n,c),t&&o(k,null,[o("span",null,null),o(ee,{active:!!((d=a.value)!=null&&d.length),value:D.value},n.counter)])])}:void 0})}),le({},z,P,i)}});export{he as V};

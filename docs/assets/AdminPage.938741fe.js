import{n as C}from"./AdminBar.d57db1e6.js";import{_ as T,f as A,h as E,V as f,j as r,i as S,k as F,b as L,ah as z,p as N}from"./VMain.f2fbd6c9.js";import{r as m,s as h,o as g,c as b,w as s,a,d as O,e as P,F as M,f as d,v,t as j,y as k,b as c,p as H,g as U}from"./index.029e4772.js";import{S as Y,V as q}from"./index.21d5b67f.js";import{V as G,b as w,a as J}from"./VList.b2d4477b.js";import{V}from"./VHover.4897b535.js";const K={components:{navigation:C,foote:A},data:()=>({url:"https://top-lista-turista-default-rtdb.europe-west1.firebasedatabase.app/",agencije:[],agencijaBrisanje:null,agencijaBrisanjeID:null,destinacijeBrisanjeID:null,agencijaBrisanjeIndex:null,fab:null,dialog:!1}),methods:{toTop(){window.scrollTo({top:0,behavior:"smooth"})},check(){this.fab=window.pageYOffset>60},async load_agencije(){let e,t;try{let o=await fetch(this.url+"/agencije.json");if(e=o.status,t=o.statusText,!o.ok)throw new Error;const i=await o.json(),u=[];for(const n in i)u.push({id:n,logo:i[n].logo,naziv:i[n].naziv,adresa:i[n].adresa,email:i[n].email,telefon:i[n].brojTelefona,destinacije:i[n].destinacije});this.agencije=u}catch(o){console.log(o),t=`Firebase: ${e}\xA0${t}`,e="Ooops",this.$router.push({path:"/error",state:{code:e,message:t}})}},async brisanjeAgencije(){let e,t;try{let o=await fetch(this.url+`/agencije/${this.agencijaBrisanjeID}.json`,{method:"DELETE"});if(e=o.status,t=o.statusText,!o.ok)throw new Error;this.agencije.splice(this.agencijaBrisanjeIndex,1),await this.brisanjeDestinacija()}catch(o){console.log(o),t=`Firebase: ${e}\xA0${t}`;const i="Ooops";this.$router.push({path:"/error",state:e==200?{}:{title:i,message:t}})}},async brisanjeDestinacija(){let e,t;try{let o=await fetch(this.url+`/destinacije/${this.destinacijeBrisanjeID}.json`,{method:"DELETE"});if(e=o.status,t=o.statusText,!o.ok)throw new Error}catch(o){console.log(o),t=`Firebase: ${e}\xA0${t}`;const i="Ooops";this.$router.push({path:"/error",state:e==200?{}:{title:i,message:t}})}}},beforeMount(){this.load_agencije()}},Q=e=>(H("data-v-186d06c8"),e=e(),U(),e),R=Q(()=>c("div",{class:"text-h4 font-weight-bold mb-n0 mt-7"},"Agencije:",-1)),W={class:"float-left"},X={class:"d-inline-block text-disabled text-right me-5 me-sm-12",style:{width:"29px","font-family":"monospace !important"}},Z={class:""};function ee(e,t,o,i,u,n){const y=m("navigation"),_=m("router-link"),x=m("foote");return h((g(),b(E,null,{default:s(()=>[a(y,{color:"secondary",flat:!1}),a(S,null,{default:s(()=>[a(q,{id:"content_holder_container"},{default:s(()=>[a(f,{id:"content_holder",class:"align-center text-center px-4 px-sm-14 px-md-16"},{default:s(()=>[a(f,{class:"kartica mb-9",variant:"outlined"},{default:s(()=>[R,a(G,{class:"px-3 px-sm-6 py-13","bg-color":"#fffdf9",lines:"one"},{default:s(()=>[(g(!0),O(M,null,P(e.agencije,(l,p)=>(g(),b(V,{key:l.id},{default:s(({isHovering:B,props:D})=>[h(a(w,{thickness:"2"},null,512),[[v,p==0]]),a(J,k(D,{style:{"background-color":B?"#f7f5f1":""}}),{title:s(()=>[c("div",W,[c("span",X,j(p+1),1),c("span",Z,j(l.naziv),1)])]),append:s(()=>[a(_,{style:{"text-decoration":"none",color:"inherit"},to:"/admin_panel/agencija/"+l.id},{default:s(()=>[a(r,{variant:"plain",icon:"mdi-pencil"})]),_:2},1032,["to"]),a(V,null,{default:s(({isHovering:I,props:$})=>[a(r,k({icon:"mdi-delete",variant:"plain"},$,{onClick:ae=>{e.dialog=!0,e.agencijaBrisanje=l.naziv,e.agencijaBrisanjeID=l.id,e.destinacijeBrisanjeID=l.destinacije,e.agencijaBrisanjeIndex=p},color:I?"red-darken-1":""}),null,16,["onClick","color"])]),_:2},1024)]),_:2},1040,["style"]),a(w,{thickness:"2"})]),_:2},1024))),128))]),_:1})]),_:1}),a(_,{style:{"text-decoration":"none",color:"inherit"},to:"/admin_panel/agencija"},{default:s(()=>[a(r,{class:"px-10 kartica mt-1",height:"50px",variant:"outlined",prependIcon:"mdi-plus"},{default:s(()=>[d(" dodaj novu agenciju ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(F,null,{default:s(()=>[h(a(r,{fab:"",dark:"",fixed:"",bottom:"",right:"",class:"topFab",color:"#bfb7a7",icon:"mdi-arrow-up",onClick:n.toTop},null,8,["onClick"]),[[v,e.fab]])]),_:1}),a(x,{mediaLinks:!1}),a(N,{modelValue:e.dialog,"onUpdate:modelValue":t[2]||(t[2]=l=>e.dialog=l),width:"auto"},{default:s(()=>[a(f,{class:"kartica_dijalog pa-4"},{default:s(()=>[a(L,{class:"text-wrap text-center mb-4 mt-1"},{default:s(()=>[d(" Da li ste sigurni da \u017Eelite da obri\u0161ete agenciju "+j(e.agencijaBrisanje)+"? ",1)]),_:1}),a(z,{class:"justify-center"},{default:s(()=>[a(r,{class:"me-2",style:{"border-radius":"13px"},variant:"text",onClick:t[0]||(t[0]=l=>{e.dialog=!1,n.brisanjeAgencije()})},{default:s(()=>[d(" Da ")]),_:1}),a(r,{style:{"border-radius":"13px"},variant:"text",onClick:t[1]||(t[1]=l=>e.dialog=!1)},{default:s(()=>[d(" Ne ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})),[[Y,n.check]])}const re=T(K,[["render",ee],["__scopeId","data-v-186d06c8"]]);export{re as default};
